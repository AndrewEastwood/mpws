{$_widgetName = "CustomApiSettings"}
{$_resourceOwner = "customApiSettings"}

<div id="MPWSWidget{$_resourceOwner|capitalize}ID" class="MPWSWidget MPWSWidgetCustom MPWSWidget{$_widgetName} MPWSWidget{$_resourceOwner|capitalize}">
    
    {$__key = md5($CURRENT.OBJECT->objectConfiguration_customer_masterJsApiKey)}
    {$__token = "token=`$__key`"}
    
    {* sales force import action security key *}
    {include file=$CURRENT.OBJECT->objectTemplatePath_component_dataRow _label=$CURRENT.OBJECT->objectProperty_widget_reportingApiSettingsKey _value=$__key}
    
    <hr size="2">
    <hr size="2">
    
    {foreach $CURRENT.SOURCE.DATA as $idx => $entry}
    
        {* sales force transfer action link *}
        {$__apiReportParams = "`$__token`&realm=plugin&oid=`$entry.RECORD.ID`"}
        {include file=$CURRENT.OBJECT->objectTemplatePath_component_dataRow _label=$CURRENT.OBJECT->objectProperty_widget_reportingApiSettingsImportLink _value="http://{$smarty.server.HTTP_HOST}/api.js?caller=reporting&fn=sf-import&p={urlencode($__apiReportParams)}"}
        
            {* show report scripts *}
            {if not empty($entry.SCRIPTS)}
                {foreach $entry.SCRIPTS as $scriptKey => $scriptName}
                    {$__apiScriptParams = "`$__token`&realm=plugin&oid=`$entry.RECORD.ID`&custom=script%3D`$scriptKey`"}
                    {include file=$CURRENT.OBJECT->objectTemplatePath_component_dataRow _label=$CURRENT.OBJECT->objectProperty_widget_reportingApiSettingsRenderLink _value="http://{$smarty.server.HTTP_HOST}/api.js?caller=reporting&fn=render&p={urlencode($__apiScriptParams)}"}
                {/foreach}
            {/if}
        
        
        <hr size="2">
    
    {/foreach}
    
    

</div>